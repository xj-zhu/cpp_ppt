<!DOCTYPE html>
<html lang="zh-Hans">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>grace_1.html</title>
    <style>
      body,
      html {
        background-color: #272822;
        padding: 0;
        margin: 0;
        position: relative;
        line-height:24px;
      }
      pre {
        margin: 0;
        padding: 0;
      }
      #linenums {
        width: 60px;
        position: absolute;
        background-color: #38284e;
        -webkit-user-select:none;/*webkit浏览器*/
        -ms-user-select:none;/*IE10*/
        user-select:none;
      }
      #linenums span {
        width: 60px;
        display: inline-block;
        position: relative;
        left: -6px;
      }
      #codes {
        position: absolute;
        min-width: calc(100% - 66px);
        width: max-content;
        margin-left: 64px;
      }
    </style>
  </head>

  <body>
    <div id="linenums">
      <div style="font-family:Consolas;font-size:24px;color:gainsboro;">      <span style="color:#4dc742; text-align:right">1</span>
      <span style="color:#4dc742; text-align:right">2</span>
      <span style="color:#4dc742; text-align:right">3</span>
      <span style="color:#4dc742; text-align:right">4</span>
      <span style="color:#4dc742; text-align:right">5</span>
      <span style="color:#4dc742; text-align:right">6</span>
      <span style="color:#4dc742; text-align:right">7</span>
      <span style="color:#4dc742; text-align:right">8</span>
      <span style="color:#4dc742; text-align:right">9</span>
      <span style="color:#4dc742; text-align:right">10</span>
      <span style="color:#4dc742; text-align:right">11</span>
      <span style="color:#4dc742; text-align:right">12</span>
      <span style="color:#4dc742; text-align:right">13</span>
      <span style="color:#4dc742; text-align:right">14</span>
      <span style="color:#4dc742; text-align:right">15</span>
      <span style="color:#4dc742; text-align:right">16</span>
      <span style="color:#4dc742; text-align:right">17</span>
      <span style="color:#4dc742; text-align:right">18</span>
      <span style="color:#4dc742; text-align:right">19</span>
      <span style="color:#4dc742; text-align:right">20</span>
      <span style="color:#4dc742; text-align:right">21</span>
      <span style="color:#4dc742; text-align:right">22</span>
      <span style="color:#4dc742; text-align:right">23</span>
      <span style="color:#4dc742; text-align:right">24</span>
      <span style="color:#4dc742; text-align:right">25</span>
      <span style="color:#4dc742; text-align:right">26</span>
      <span style="color:#4dc742; text-align:right">27</span>
      <span style="color:#4dc742; text-align:right">28</span>
      <span style="color:#4dc742; text-align:right">29</span>
      <span style="color:#4dc742; text-align:right">30</span>
      <span style="color:#4dc742; text-align:right">31</span>
      <span style="color:#4dc742; text-align:right">32</span>
      <span style="color:#4dc742; text-align:right">33</span>
      <span style="color:#4dc742; text-align:right">34</span>
      <span style="color:#4dc742; text-align:right">35</span>
      <span style="color:#4dc742; text-align:right">36</span>
      <span style="color:#4dc742; text-align:right">37</span>
      <span style="color:#4dc742; text-align:right">38</span>
      <span style="color:#4dc742; text-align:right">39</span>
      <span style="color:#4dc742; text-align:right">40</span>
      <span style="color:#4dc742; text-align:right">41</span>
      <span style="color:#4dc742; text-align:right">42</span>
      <span style="color:#4dc742; text-align:right">43</span>
      <span style="color:#4dc742; text-align:right">44</span>
      <span style="color:#4dc742; text-align:right">45</span>
      <span style="color:#4dc742; text-align:right">46</span>
      <span style="color:#4dc742; text-align:right">47</span>
      <span style="color:#4dc742; text-align:right">48</span>
      <span style="color:#4dc742; text-align:right">49</span>
      <span style="color:#4dc742; text-align:right">50</span>
      <span style="color:#4dc742; text-align:right">51</span>
      <span style="color:#4dc742; text-align:right">52</span>
      <span style="color:#4dc742; text-align:right">53</span>
      <span style="color:#4dc742; text-align:right">54</span>
      <span style="color:#4dc742; text-align:right">55</span>
      <span style="color:#4dc742; text-align:right">56</span>
      <span style="color:#4dc742; text-align:right">57</span>
      <span style="color:#4dc742; text-align:right">58</span>
      <span style="color:#4dc742; text-align:right">59</span>
      <span style="color:#4dc742; text-align:right">60</span>
      <span style="color:#4dc742; text-align:right">61</span>
      <span style="color:#4dc742; text-align:right">62</span>
      <span style="color:#4dc742; text-align:right">63</span>
      <span style="color:#4dc742; text-align:right">64</span>
      <span style="color:#4dc742; text-align:right">65</span>
      <span style="color:#4dc742; text-align:right">66</span>
      <span style="color:#4dc742; text-align:right">67</span>
      <span style="color:#4dc742; text-align:right">68</span>
      <span style="color:#4dc742; text-align:right">69</span>
      <span style="color:#4dc742; text-align:right">70</span>
      </div>
    </div>
    <div id="codes">
      <pre style="font-family:Consolas;font-size:24px;color:gainsboro;background:#1e1e1e;"><span style="color:#57a64a;">//1.//////////////////////////////////////////////////////</span><br/><span style="color:#569cd6;">int</span>&nbsp;<span style="color:darkkhaki;">flag</span>&nbsp;<span style="color:#b4b4b4;">=</span>&nbsp;<span style="color:#b5cea8;">0</span><span style="color:#b4b4b4;">;</span><br/><span style="color:#569cd6;">static_assert</span><span style="color:#b4b4b4;">(</span><span style="color:gold;">std</span><span style="color:#b4b4b4;">::</span><span style="color:gold;">is_convertible</span><span style="color:#b4b4b4;">&lt;</span><span style="color:#569cd6;">decltype</span><span style="color:#b4b4b4;">(</span><span style="color:darkkhaki;">flag</span><span style="color:#b4b4b4;">),</span>&nbsp;<span style="color:#569cd6;">bool</span><span style="color:#b4b4b4;">&gt;::</span><span style="color:darkkhaki;">value</span><span style="color:#b4b4b4;">,</span>&nbsp;<span style="color:#d69d85;">&quot;flag&nbsp;must&nbsp;be&nbsp;a&nbsp;boolean&quot;</span><span style="color:#b4b4b4;">);</span>&nbsp;<span style="color:#57a64a;">//c++11</span><br/><span style="color:#57a64a;">//&nbsp;or</span><br/><span style="color:#569cd6;">static_assert</span><span style="color:#b4b4b4;">(</span><span style="color:gold;">std</span><span style="color:#b4b4b4;">::</span><span style="color:gold;">is_convertible</span><span style="color:#b4b4b4;">&lt;</span><span style="color:#569cd6;">decltype</span><span style="color:#b4b4b4;">(</span><span style="color:darkkhaki;">flag</span><span style="color:#b4b4b4;">),</span>&nbsp;<span style="color:#569cd6;">bool</span><span style="color:#b4b4b4;">&gt;::</span><span style="color:darkkhaki;">value</span><span style="color:#b4b4b4;">);</span>&nbsp;<span style="color:#57a64a;">//c++17</span><br/> <br/><span style="color:#569cd6;">constexpr</span>&nbsp;<span style="color:#569cd6;">int</span>&nbsp;<span style="color:#ff8000;">accumulation</span><span style="color:#b4b4b4;">(</span><span style="color:#569cd6;">int</span>&nbsp;<span style="color:darkkhaki;">num</span><span style="color:#b4b4b4;">)</span><br/><span style="color:#b4b4b4;">{</span><br/>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#569cd6;">int</span>&nbsp;<span style="color:darkkhaki;">ret</span>&nbsp;<span style="color:#b4b4b4;">=</span>&nbsp;<span style="color:#b5cea8;">0</span><span style="color:#b4b4b4;">;</span><br/>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#569cd6;">for</span>&nbsp;<span style="color:#b4b4b4;">(</span><span style="color:#569cd6;">int</span>&nbsp;<span style="color:darkkhaki;">i</span>&nbsp;<span style="color:#b4b4b4;">=</span>&nbsp;<span style="color:#b5cea8;">1</span><span style="color:#b4b4b4;">;</span>&nbsp;<span style="color:darkkhaki;">i</span>&nbsp;<span style="color:#b4b4b4;">&lt;=</span>&nbsp;<span style="color:darkkhaki;">num</span><span style="color:#b4b4b4;">;</span>&nbsp;<span style="color:#b4b4b4;">++</span><span style="color:darkkhaki;">i</span><span style="color:#b4b4b4;">)</span><br/>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#b4b4b4;">{</span><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:darkkhaki;">ret</span>&nbsp;<span style="color:#b4b4b4;">+=</span>&nbsp;<span style="color:darkkhaki;">i</span><span style="color:#b4b4b4;">;</span><br/>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#b4b4b4;">}</span><br/>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#569cd6;">return</span>&nbsp;<span style="color:darkkhaki;">ret</span><span style="color:#b4b4b4;">;</span><br/><span style="color:#b4b4b4;">}</span><br/><span style="color:#569cd6;">static_assert</span><span style="color:#b4b4b4;">(</span><span style="color:#ff8000;">accumulation</span><span style="color:#b4b4b4;">(</span><span style="color:#b5cea8;">100</span><span style="color:#b4b4b4;">)</span>&nbsp;<span style="color:#b4b4b4;">==</span>&nbsp;<span style="color:#b5cea8;">5050</span><span style="color:#b4b4b4;">,</span>&nbsp;<span style="color:#d69d85;">&quot;test&nbsp;constexpr&nbsp;function&nbsp;accumulation&nbsp;failed!&quot;</span><span style="color:#b4b4b4;">);</span><br/> <br/><span style="color:#57a64a;">//2.//////////////////////////////////////////////////////</span><br/><span style="color:#57a64a;">//&nbsp;in&nbsp;car_type.h</span><br/><span style="color:#569cd6;">enum</span>&nbsp;<span style="color:#569cd6;">class</span>&nbsp;<span style="color:gold;">EMCAR</span><br/><span style="color:#b4b4b4;">{</span><br/>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#bd63c5;">BMW</span><span style="color:#b4b4b4;">,</span><br/>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#bd63c5;">BENZ</span><span style="color:#b4b4b4;">,</span><br/>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#bd63c5;">AUDI</span><span style="color:#b4b4b4;">,</span><br/><span style="color:#b4b4b4;">};</span><br/> <br/><span style="color:#57a64a;">//&nbsp;in&nbsp;car_factory.h</span><br/><span style="color:#569cd6;">enum</span>&nbsp;<span style="color:#569cd6;">class</span>&nbsp;<span style="color:gold;">EMCAR</span><span style="color:#b4b4b4;">;</span><br/>calss&nbsp;<span style="color:darkkhaki;">AbstractCar</span><span style="color:#b4b4b4;">;</span><br/> <br/><span style="color:darkkhaki;">AbstractCar</span><span style="color:#b4b4b4;">*</span>&nbsp;<span style="color:#ff8000;">MakeCar</span><span style="color:#b4b4b4;">(</span><span style="color:gold;">EMCAR</span>&nbsp;<span style="color:gold;">type</span><span style="color:#b4b4b4;">);</span><br/> <br/><span style="color:#57a64a;">//&nbsp;in&nbsp;car_factory.cpp</span><br/><span style="color:#9b9b9b;">#include</span>&nbsp;<span style="color:#d69d85;">&quot;car_factory.h&quot;</span><br/><span style="color:#9b9b9b;">#include</span>&nbsp;<span style="color:#d69d85;">&quot;car_type.h&quot;</span><br/><span style="color:#9b9b9b;">#include</span>&nbsp;<span style="color:#d69d85;">&quot;car_bmw.h&quot;</span><br/><span style="color:#9b9b9b;">#include</span>&nbsp;<span style="color:#d69d85;">&quot;car_benz.h&quot;</span><br/><span style="color:#9b9b9b;">#include</span>&nbsp;<span style="color:#d69d85;">&quot;car_baudi.h&quot;</span><br/> <br/><span style="color:darkkhaki;">AbstractCar</span><span style="color:#b4b4b4;">*</span>&nbsp;<span style="color:#ff8000;">MakeCar</span><span style="color:#b4b4b4;">(</span><span style="color:gold;">EMCAR</span>&nbsp;<span style="color:gold;">type</span><span style="color:#b4b4b4;">)</span><br/><span style="color:#b4b4b4;">{</span><br/>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#569cd6;">switch</span>&nbsp;<span style="color:#b4b4b4;">(</span><span style="color:gold;">type</span><span style="color:#b4b4b4;">)</span><br/>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#b4b4b4;">{</span><br/>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#569cd6;">default</span><span style="color:#b4b4b4;">:</span><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#569cd6;">return</span>&nbsp;<span style="color:#569cd6;">nullptr</span><span style="color:#b4b4b4;">;</span><br/>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#569cd6;">case</span>&nbsp;<span style="color:gold;">EMCAR</span><span style="color:#b4b4b4;">::</span><span style="color:#bd63c5;">BMW</span><span style="color:#b4b4b4;">:</span><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#569cd6;">return</span>&nbsp;BmwCar<span style="color:#b4b4b4;">();</span><br/>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#569cd6;">case</span>&nbsp;<span style="color:gold;">EMCAR</span><span style="color:#b4b4b4;">::</span><span style="color:#bd63c5;">BENZ</span><span style="color:#b4b4b4;">:</span><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#569cd6;">return</span>&nbsp;BenzCar<span style="color:#b4b4b4;">();</span><br/>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#569cd6;">case</span>&nbsp;<span style="color:gold;">EMCAR</span><span style="color:#b4b4b4;">::</span><span style="color:#bd63c5;">AUDI</span><span style="color:#b4b4b4;">:</span><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#569cd6;">return</span>&nbsp;AudiCar<span style="color:#b4b4b4;">();</span><br/>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#b4b4b4;">}</span><br/><span style="color:#b4b4b4;">}</span><br/> <br/><span style="color:#57a64a;">//3.//////////////////////////////////////////////////////</span><br/><span style="color:#569cd6;">for</span>&nbsp;<span style="color:#b4b4b4;">(</span><span style="color:#569cd6;">auto</span><span style="color:#b4b4b4;">&amp;</span>&nbsp;<span style="color:darkkhaki;">x</span>&nbsp;<span style="color:#b4b4b4;">:</span>&nbsp;<span style="color:#b4b4b4;">{</span>&nbsp;<span style="color:#b5cea8;">1</span><span style="color:#b4b4b4;">,</span><span style="color:#b5cea8;">2</span><span style="color:#b4b4b4;">,</span><span style="color:#b5cea8;">3</span><span style="color:#b4b4b4;">,</span><span style="color:#b5cea8;">4</span><span style="color:#b4b4b4;">,</span><span style="color:#b5cea8;">5</span><span style="color:#b4b4b4;">,</span><span style="color:#b5cea8;">6</span><span style="color:#b4b4b4;">,</span><span style="color:#b5cea8;">7</span>&nbsp;<span style="color:#b4b4b4;">})</span><br/><span style="color:#b4b4b4;">{</span><br/>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:gold;">std</span><span style="color:#b4b4b4;">::</span><span style="color:darkkhaki;">cout</span>&nbsp;<span style="color:#b4b4b4;">&lt;&lt;</span>&nbsp;<span style="color:darkkhaki;">x</span>&nbsp;<span style="color:#b4b4b4;">&lt;&lt;</span>&nbsp;<span style="color:gold;">std</span><span style="color:#b4b4b4;">::</span><span style="color:#ff8000;">endl</span><span style="color:#b4b4b4;">;</span><br/><span style="color:#b4b4b4;">}</span><br/> <br/><span style="color:#57a64a;">//4.//////////////////////////////////////////////////////</span><br/><span style="color:#569cd6;">int</span>&nbsp;<span style="color:gold;">arr</span><span style="color:#b4b4b4;">[]{</span><span style="color:#b5cea8;">1</span><span style="color:#b4b4b4;">,</span><span style="color:#b5cea8;">2</span><span style="color:#b4b4b4;">,</span><span style="color:#b5cea8;">3</span><span style="color:#b4b4b4;">,</span><span style="color:#b5cea8;">4</span><span style="color:#b4b4b4;">,</span><span style="color:#b5cea8;">5</span><span style="color:#b4b4b4;">,</span><span style="color:#b5cea8;">6</span><span style="color:#b4b4b4;">,</span><span style="color:#b5cea8;">7</span><span style="color:#b4b4b4;">,</span><span style="color:#b5cea8;">8</span><span style="color:#b4b4b4;">,</span><span style="color:#b5cea8;">9</span><span style="color:#b4b4b4;">};</span><br/><span style="color:#569cd6;">auto</span>&nbsp;<span style="color:darkkhaki;">b</span>&nbsp;<span style="color:#b4b4b4;">=</span>&nbsp;<span style="color:gold;">std</span><span style="color:#b4b4b4;">::</span><span style="color:#ff8000;">begin</span><span style="color:#b4b4b4;">(</span><span style="color:gold;">arr</span><span style="color:#b4b4b4;">),</span>&nbsp;<span style="color:darkkhaki;">e</span>&nbsp;<span style="color:#b4b4b4;">=</span>&nbsp;<span style="color:gold;">std</span><span style="color:#b4b4b4;">::</span><span style="color:#ff8000;">end</span><span style="color:#b4b4b4;">(</span><span style="color:gold;">arr</span><span style="color:#b4b4b4;">);</span><br/><span style="color:#569cd6;">for</span>&nbsp;<span style="color:#b4b4b4;">(</span><span style="color:#569cd6;">auto</span>&nbsp;<span style="color:darkkhaki;">it</span>&nbsp;<span style="color:#b4b4b4;">=</span>&nbsp;<span style="color:darkkhaki;">b</span><span style="color:#b4b4b4;">;</span>&nbsp;<span style="color:darkkhaki;">it</span>&nbsp;<span style="color:#b4b4b4;">&lt;</span>&nbsp;<span style="color:darkkhaki;">e</span><span style="color:#b4b4b4;">;</span>&nbsp;<span style="color:darkkhaki;">it</span>&nbsp;<span style="color:#b4b4b4;">=</span>&nbsp;<span style="color:gold;">std</span><span style="color:#b4b4b4;">::</span><span style="color:#ff8000;">advance</span><span style="color:#b4b4b4;">(</span><span style="color:darkkhaki;">it</span><span style="color:#b4b4b4;">,</span>&nbsp;<span style="color:#b5cea8;">1</span><span style="color:#b4b4b4;">))</span><br/><span style="color:#b4b4b4;">{</span><br/>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:gold;">std</span><span style="color:#b4b4b4;">::</span><span style="color:darkkhaki;">cout</span>&nbsp;<span style="color:#b4b4b4;">&lt;&lt;</span>&nbsp;<span style="color:#b4b4b4;">*</span><span style="color:darkkhaki;">it</span>&nbsp;<span style="color:#b4b4b4;">&lt;&lt;</span>&nbsp;<span style="color:gold;">std</span><span style="color:#b4b4b4;">::</span><span style="color:#ff8000;">endl</span><span style="color:#b4b4b4;">;</span><br/><span style="color:#b4b4b4;">}</span><br/><span style="color:gold;">std</span><span style="color:#b4b4b4;">::</span><span style="color:darkkhaki;">cout</span>&nbsp;<span style="color:#b4b4b4;">&lt;&lt;</span>&nbsp;<span style="color:gold;">std</span><span style="color:#b4b4b4;">::</span><span style="color:#ff8000;">distance</span><span style="color:#b4b4b4;">(</span><span style="color:darkkhaki;">b</span><span style="color:#b4b4b4;">,</span>&nbsp;<span style="color:darkkhaki;">e</span><span style="color:#b4b4b4;">)</span>&nbsp;<span style="color:#b4b4b4;">&lt;&lt;</span>&nbsp;<span style="color:gold;">std</span><span style="color:#b4b4b4;">::</span><span style="color:#ff8000;">endl</span><span style="color:#b4b4b4;">;</span><br/><span style="color:gold;">std</span><span style="color:#b4b4b4;">::</span><span style="color:darkkhaki;">cout</span>&nbsp;<span style="color:#b4b4b4;">&lt;&lt;</span>&nbsp;<span style="color:gold;">std</span><span style="color:#b4b4b4;">::</span><span style="color:#ff8000;">count</span><span style="color:#b4b4b4;">(</span><span style="color:darkkhaki;">b</span><span style="color:#b4b4b4;">,</span>&nbsp;<span style="color:darkkhaki;">e</span><span style="color:#b4b4b4;">,</span>&nbsp;<span style="color:#b5cea8;">3</span><span style="color:#b4b4b4;">)</span>&nbsp;<span style="color:#b4b4b4;">&lt;&lt;</span>&nbsp;<span style="color:gold;">std</span><span style="color:#b4b4b4;">::</span><span style="color:#ff8000;">endl</span><span style="color:#b4b4b4;">;</span><br/><span style="color:gold;">std</span><span style="color:#b4b4b4;">::</span><span style="color:darkkhaki;">cout</span>&nbsp;<span style="color:#b4b4b4;">&lt;&lt;</span>&nbsp;<span style="color:gold;">std</span><span style="color:#b4b4b4;">::</span><span style="color:#ff8000;">count_if</span><span style="color:#b4b4b4;">(</span><span style="color:gold;">std</span><span style="color:#b4b4b4;">::</span><span style="color:gold;">execution</span><span style="color:#b4b4b4;">::</span><span style="color:darkkhaki;">par</span><span style="color:#b4b4b4;">,</span>&nbsp;<span style="color:darkkhaki;">b</span><span style="color:#b4b4b4;">,</span>&nbsp;<span style="color:darkkhaki;">e</span><span style="color:#b4b4b4;">,</span>&nbsp;<span style="color:#b4b4b4;">[](</span><span style="color:#569cd6;">const</span>&nbsp;<span style="color:#569cd6;">int</span><span style="color:#b4b4b4;">&amp;</span>&nbsp;<span style="color:darkkhaki;">n</span><span style="color:#b4b4b4;">)</span>&nbsp;<span style="color:#b4b4b4;">{</span><span style="color:#569cd6;">return</span>&nbsp;<span style="color:darkkhaki;">n</span>&nbsp;<span style="color:#b4b4b4;">%</span>&nbsp;<span style="color:#b5cea8;">2</span><span style="color:#b4b4b4;">;</span>&nbsp;<span style="color:#b4b4b4;">})</span>&nbsp;<span style="color:#b4b4b4;">&lt;&lt;</span>&nbsp;<span style="color:gold;">std</span><span style="color:#b4b4b4;">::</span><span style="color:#ff8000;">endl</span><span style="color:#b4b4b4;">;</span><br/></pre>
    </div>
  </body>
</html>
