<!DOCTYPE html>
<html lang="zh-Hans">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>grace_6.html</title>
    <style>
      body,
      html {
        background-color: #272822;
        padding: 0;
        margin: 0;
        position: relative;
        line-height:24px;
      }
      pre {
        margin: 0;
        padding: 0;
      }
      #linenums {
        width: 60px;
        position: absolute;
        background-color: #272822;
        -webkit-user-select:none;/*webkit浏览器*/
        -ms-user-select:none;/*IE10*/
        user-select:none;
        margin-top: 2000px;
        padding-bottom: 2000px;
      }
      #linenums span {
        width: 60px;
        display: inline-block;
        position: relative;
        left: -6px;
      }
      #codes {
        position: absolute;
        min-width: calc(100% - 66px);
        width: max-content;
        margin-left: 64px;
        margin-top: 2000px;
        padding-bottom: 2000px;
      }
    </style>
  </head>

  <body>
    <div id="linenums">
      <div style="font-family:Consolas;font-size:24px;color:gainsboro; background-color: #38284e">
      <span style="color:#4dc742; text-align:right">1</span>
      <span style="color:#4dc742; text-align:right">2</span>
      <span style="color:#4dc742; text-align:right">3</span>
      <span style="color:#4dc742; text-align:right">4</span>
      <span style="color:#4dc742; text-align:right">5</span>
      <span style="color:#4dc742; text-align:right">6</span>
      <span style="color:#4dc742; text-align:right">7</span>
      <span style="color:#4dc742; text-align:right">8</span>
      <span style="color:#4dc742; text-align:right">9</span>
      <span style="color:#4dc742; text-align:right">10</span>
      <span style="color:#4dc742; text-align:right">11</span>
      <span style="color:#4dc742; text-align:right">12</span>
      <span style="color:#4dc742; text-align:right">13</span>
      <span style="color:#4dc742; text-align:right">14</span>
      <span style="color:#4dc742; text-align:right">15</span>
      <span style="color:#4dc742; text-align:right">16</span>
      <span style="color:#4dc742; text-align:right">17</span>
      <span style="color:#4dc742; text-align:right">18</span>
      <span style="color:#4dc742; text-align:right">19</span>
      <span style="color:#4dc742; text-align:right">20</span>
      <span style="color:#4dc742; text-align:right">21</span>
      <span style="color:#4dc742; text-align:right">22</span>
      <span style="color:#4dc742; text-align:right">23</span>
      <span style="color:#4dc742; text-align:right">24</span>
      <span style="color:#4dc742; text-align:right">25</span>
      <span style="color:#4dc742; text-align:right">26</span>
      <span style="color:#4dc742; text-align:right">27</span>
      <span style="color:#4dc742; text-align:right">28</span>
      <span style="color:#4dc742; text-align:right">29</span>
      <span style="color:#4dc742; text-align:right">30</span>
      <span style="color:#4dc742; text-align:right">31</span>
      <span style="color:#4dc742; text-align:right">32</span>
      <span style="color:#4dc742; text-align:right">33</span>
      <span style="color:#4dc742; text-align:right">34</span>
      <span style="color:#4dc742; text-align:right">35</span>
      <span style="color:#4dc742; text-align:right">36</span>
      <span style="color:#4dc742; text-align:right">37</span>
      <span style="color:#4dc742; text-align:right">38</span>
      <span style="color:#4dc742; text-align:right">39</span>
      <span style="color:#4dc742; text-align:right">40</span>
      <span style="color:#4dc742; text-align:right">41</span>
      <span style="color:#4dc742; text-align:right">42</span>
      <span style="color:#4dc742; text-align:right">43</span>
      <span style="color:#4dc742; text-align:right">44</span>
      <span style="color:#4dc742; text-align:right">45</span>
      <span style="color:#4dc742; text-align:right">46</span>
      <span style="color:#4dc742; text-align:right">47</span>
      <span style="color:#4dc742; text-align:right">48</span>
      <span style="color:#4dc742; text-align:right">49</span>
      <span style="color:#4dc742; text-align:right">50</span>
      <span style="color:#4dc742; text-align:right">51</span>
      <span style="color:#4dc742; text-align:right">52</span>
      <span style="color:#4dc742; text-align:right">53</span>
      <span style="color:#4dc742; text-align:right">54</span>
      <span style="color:#4dc742; text-align:right">55</span>
      <span style="color:#4dc742; text-align:right">56</span>
      <span style="color:#4dc742; text-align:right">57</span>
      <span style="color:#4dc742; text-align:right">58</span>
      <span style="color:#4dc742; text-align:right">59</span>
      <span style="color:#4dc742; text-align:right">60</span>
      <span style="color:#4dc742; text-align:right">61</span>
      <span style="color:#4dc742; text-align:right">62</span>
      <span style="color:#4dc742; text-align:right">63</span>
      <span style="color:#4dc742; text-align:right">64</span>
      <span style="color:#4dc742; text-align:right">65</span>
      <span style="color:#4dc742; text-align:right">66</span>
      <span style="color:#4dc742; text-align:right">67</span>
      <span style="color:#4dc742; text-align:right">68</span>
      <span style="color:#4dc742; text-align:right">69</span>
      <span style="color:#4dc742; text-align:right">70</span>
      <span style="color:#4dc742; text-align:right">71</span>
      <span style="color:#4dc742; text-align:right">72</span>
      <span style="color:#4dc742; text-align:right">73</span>
      <span style="color:#4dc742; text-align:right">74</span>
      <span style="color:#4dc742; text-align:right">75</span>
      <span style="color:#4dc742; text-align:right">76</span>
      <span style="color:#4dc742; text-align:right">77</span>
      <span style="color:#4dc742; text-align:right">78</span>
      <span style="color:#4dc742; text-align:right">79</span>
      <span style="color:#4dc742; text-align:right">80</span>
      <span style="color:#4dc742; text-align:right">81</span>
      <span style="color:#4dc742; text-align:right">82</span>
      <span style="color:#4dc742; text-align:right">83</span>
      <span style="color:#4dc742; text-align:right">84</span>
      <span style="color:#4dc742; text-align:right">85</span>
      <span style="color:#4dc742; text-align:right">86</span>
      <span style="color:#4dc742; text-align:right">87</span>
      <span style="color:#4dc742; text-align:right">88</span>
      <span style="color:#4dc742; text-align:right">89</span>
      <span style="color:#4dc742; text-align:right">90</span>
      <span style="color:#4dc742; text-align:right">91</span>
      <span style="color:#4dc742; text-align:right">92</span>
      <span style="color:#4dc742; text-align:right">93</span>
      <span style="color:#4dc742; text-align:right">94</span>
      <span style="color:#4dc742; text-align:right">95</span>
      <span style="color:#4dc742; text-align:right">96</span>
      <span style="color:#4dc742; text-align:right">97</span>
      <span style="color:#4dc742; text-align:right">98</span>
      <span style="color:#4dc742; text-align:right">99</span>
      <span style="color:#4dc742; text-align:right">100</span>
      <span style="color:#4dc742; text-align:right">101</span>
      <span style="color:#4dc742; text-align:right">102</span>
      <span style="color:#4dc742; text-align:right">103</span>
      <span style="color:#4dc742; text-align:right">104</span>
      <span style="color:#4dc742; text-align:right">105</span>
      <span style="color:#4dc742; text-align:right">106</span>
      <span style="color:#4dc742; text-align:right">107</span>
      <span style="color:#4dc742; text-align:right">108</span>
      <span style="color:#4dc742; text-align:right">109</span>
      <span style="color:#4dc742; text-align:right">110</span>
      <span style="color:#4dc742; text-align:right">111</span>
      <span style="color:#4dc742; text-align:right">112</span>
      <span style="color:#4dc742; text-align:right">113</span>
      <span style="color:#4dc742; text-align:right">114</span>
      <span style="color:#4dc742; text-align:right">115</span>
      <span style="color:#4dc742; text-align:right">116</span>
      <span style="color:#4dc742; text-align:right">117</span>
      <span style="color:#4dc742; text-align:right">118</span>
      <span style="color:#4dc742; text-align:right">119</span>
      <span style="color:#4dc742; text-align:right">120</span>
      <span style="color:#4dc742; text-align:right">121</span>
      <span style="color:#4dc742; text-align:right">122</span>
      <span style="color:#4dc742; text-align:right">123</span>
      <span style="color:#4dc742; text-align:right">124</span>
      <span style="color:#4dc742; text-align:right">125</span>
      <span style="color:#4dc742; text-align:right">126</span>
      <span style="color:#4dc742; text-align:right">127</span>
      <span style="color:#4dc742; text-align:right">128</span>
      <span style="color:#4dc742; text-align:right">129</span>
      <span style="color:#4dc742; text-align:right">130</span>
      <span style="color:#4dc742; text-align:right">131</span>
      <span style="color:#4dc742; text-align:right">132</span>
      <span style="color:#4dc742; text-align:right">133</span>
      <span style="color:#4dc742; text-align:right">134</span>
      <span style="color:#4dc742; text-align:right">135</span>
      <span style="color:#4dc742; text-align:right">136</span>
      <span style="color:#4dc742; text-align:right">137</span>
      <span style="color:#4dc742; text-align:right">138</span>
      <span style="color:#4dc742; text-align:right">139</span>
      <span style="color:#4dc742; text-align:right">140</span>
      <span style="color:#4dc742; text-align:right">141</span>
      <span style="color:#4dc742; text-align:right">142</span>
      <span style="color:#4dc742; text-align:right">143</span>
      <span style="color:#4dc742; text-align:right">144</span>
      <span style="color:#4dc742; text-align:right">145</span>
      <span style="color:#4dc742; text-align:right">146</span>
      <span style="color:#4dc742; text-align:right">147</span>
      <span style="color:#4dc742; text-align:right">148</span>
      <span style="color:#4dc742; text-align:right">149</span>
      <span style="color:#4dc742; text-align:right">150</span>
      <span style="color:#4dc742; text-align:right">151</span>
      <span style="color:#4dc742; text-align:right">152</span>
      <span style="color:#4dc742; text-align:right">153</span>
      <span style="color:#4dc742; text-align:right">154</span>
      <span style="color:#4dc742; text-align:right">155</span>
      <span style="color:#4dc742; text-align:right">156</span>
      <span style="color:#4dc742; text-align:right">157</span>
      <span style="color:#4dc742; text-align:right">158</span>
      <span style="color:#4dc742; text-align:right">159</span>
      <span style="color:#4dc742; text-align:right">160</span>
      <span style="color:#4dc742; text-align:right">161</span>
      <span style="color:#4dc742; text-align:right">162</span>
      <span style="color:#4dc742; text-align:right">163</span>
      <span style="color:#4dc742; text-align:right">164</span>
      <span style="color:#4dc742; text-align:right">165</span>
      <span style="color:#4dc742; text-align:right">166</span>
      <span style="color:#4dc742; text-align:right">167</span>
      <span style="color:#4dc742; text-align:right">168</span>
      <span style="color:#4dc742; text-align:right">169</span>
      <span style="color:#4dc742; text-align:right">170</span>
      <span style="color:#4dc742; text-align:right">171</span>
      </div>
    </div>
    <div id="codes">
      <pre style="font-family:Consolas;font-size:24px;color:gainsboro;background:#1e1e1e;"><span style="color:#57a64a;">//1.//////////////////////////////////////////////////////</span><br/><span style="color:#569cd6;">class</span>&nbsp;<span style="color:gold;">A</span>&nbsp;<span style="color:#b4b4b4;">{</span>&nbsp;<span style="color:#569cd6;">public</span><span style="color:#b4b4b4;">:</span>&nbsp;<span style="color:#569cd6;">int</span>&nbsp;<span style="color:gold;">a</span>&nbsp;<span style="color:#b4b4b4;">=</span>&nbsp;<span style="color:#b5cea8;">1</span><span style="color:#b4b4b4;">;</span>&nbsp;<span style="color:#b4b4b4;">};</span><br/><span style="color:#569cd6;">class</span>&nbsp;<span style="color:gold;">B</span>&nbsp;<span style="color:#b4b4b4;">{</span>&nbsp;<span style="color:#569cd6;">public</span><span style="color:#b4b4b4;">:</span>&nbsp;<span style="color:#569cd6;">int</span>&nbsp;<span style="color:darkkhaki;">b</span>&nbsp;<span style="color:#b4b4b4;">=</span>&nbsp;<span style="color:#b5cea8;">2</span><span style="color:#b4b4b4;">;</span>&nbsp;<span style="color:#b4b4b4;">};</span><br/> <br/><span style="color:#569cd6;">template</span>&nbsp;<span style="color:#b4b4b4;">&lt;</span><span style="color:#569cd6;">typename</span><span style="color:#b4b4b4;">...</span>&nbsp;Args<span style="color:#b4b4b4;">&gt;</span><br/><span style="color:#569cd6;">class</span>&nbsp;<span style="color:gold;">C</span>&nbsp;<span style="color:#b4b4b4;">:</span>&nbsp;<span style="color:#569cd6;">public</span>&nbsp;Args<span style="color:#b4b4b4;">...</span>&nbsp;<span style="color:#b4b4b4;">{};</span><br/> <br/><span style="color:#569cd6;">template</span><span style="color:#b4b4b4;">&lt;</span><span style="color:#569cd6;">class</span><span style="color:#b4b4b4;">...</span>&nbsp;_Types<span style="color:#b4b4b4;">&gt;</span><br/><span style="color:#569cd6;">class</span>&nbsp;<span style="color:gold;">D</span><span style="color:#b4b4b4;">;</span>&nbsp;<span style="color:#57a64a;">//&nbsp;前置声明</span><br/><span style="color:#569cd6;">template</span><span style="color:#b4b4b4;">&lt;</span><span style="color:#569cd6;">typename</span>&nbsp;<span style="color:gold;">_This</span><span style="color:#b4b4b4;">,</span>&nbsp;<span style="color:#569cd6;">typename</span><span style="color:#b4b4b4;">...</span>&nbsp;_Others<span style="color:#b4b4b4;">&gt;</span><br/><span style="color:#569cd6;">class</span>&nbsp;<span style="color:gold;">D</span><span style="color:#b4b4b4;">&lt;</span><span style="color:gold;">_This</span><span style="color:#b4b4b4;">,</span>&nbsp;_Others<span style="color:#b4b4b4;">...&gt;</span>&nbsp;<span style="color:#b4b4b4;">:</span>&nbsp;<span style="color:#569cd6;">public</span>&nbsp;<span style="color:gold;">D</span><span style="color:#b4b4b4;">&lt;</span>_Others<span style="color:#b4b4b4;">...&gt;</span>&nbsp;<span style="color:#57a64a;">//&nbsp;通用模板</span><br/><span style="color:#b4b4b4;">{</span><br/><span style="color:#569cd6;">public</span><span style="color:#b4b4b4;">:</span><br/>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#569cd6;">typedef</span>&nbsp;<span style="color:gold;">_This</span>&nbsp;<span style="color:gold;">type</span><span style="color:#b4b4b4;">;</span><br/>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:gold;">size_t</span>&nbsp;<span style="color:darkkhaki;">_size</span>&nbsp;<span style="color:#b4b4b4;">=</span>&nbsp;<span style="color:#569cd6;">sizeof</span><span style="color:#b4b4b4;">...(</span>_Others<span style="color:#b4b4b4;">)</span>&nbsp;<span style="color:#b4b4b4;">+</span>&nbsp;<span style="color:#b5cea8;">1</span><span style="color:#b4b4b4;">;</span><br/><span style="color:#b4b4b4;">};</span><br/><span style="color:#569cd6;">template</span><span style="color:#b4b4b4;">&lt;&gt;</span>&nbsp;<span style="color:#57a64a;">//&nbsp;特化模板</span><br/><span style="color:#569cd6;">class</span>&nbsp;<span style="color:gold;">D</span><span style="color:#b4b4b4;">&lt;&gt;</span>&nbsp;<span style="color:#b4b4b4;">{};</span><br/> <br/><span style="color:#57a64a;">//2.//////////////////////////////////////////////////////</span><br/><span style="color:#57a64a;">//变长模板参数实现类似printf</span><br/><span style="color:#569cd6;">void</span>&nbsp;<span style="color:#ff8000;">printf</span><span style="color:#b4b4b4;">(</span><span style="color:#569cd6;">const</span>&nbsp;<span style="color:#569cd6;">char</span><span style="color:#b4b4b4;">*</span>&nbsp;<span style="color:darkkhaki;">s</span><span style="color:#b4b4b4;">)</span><br/><span style="color:#b4b4b4;">{</span><br/>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#569cd6;">while</span>&nbsp;<span style="color:#b4b4b4;">(*</span><span style="color:darkkhaki;">s</span><span style="color:#b4b4b4;">)</span><br/>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#b4b4b4;">{</span><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#569cd6;">if</span>&nbsp;<span style="color:#b4b4b4;">(*</span><span style="color:darkkhaki;">s</span>&nbsp;<span style="color:#b4b4b4;">==</span>&nbsp;<span style="color:#d69d85;">&#39;%&#39;</span>&nbsp;<span style="color:#b4b4b4;">&amp;&amp;</span>&nbsp;<span style="color:#b4b4b4;">*(++</span><span style="color:darkkhaki;">s</span><span style="color:#b4b4b4;">)</span>&nbsp;<span style="color:#b4b4b4;">!=</span>&nbsp;<span style="color:#d69d85;">&#39;%&#39;</span><span style="color:#b4b4b4;">)</span><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#569cd6;">throw</span>&nbsp;<span style="color:gold;">std</span><span style="color:#b4b4b4;">::</span><span style="color:gold;">runtime_error</span><span style="color:#b4b4b4;">(</span><span style="color:#d69d85;">&quot;invalid&nbsp;format&nbsp;string:&nbsp;missing&nbsp;arguments&quot;</span><span style="color:#b4b4b4;">);</span><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:gold;">std</span><span style="color:#b4b4b4;">::</span><span style="color:darkkhaki;">cout</span>&nbsp;<span style="color:#b4b4b4;">&lt;&lt;</span>&nbsp;<span style="color:#b4b4b4;">*</span><span style="color:darkkhaki;">s</span><span style="color:#b4b4b4;">++;</span><br/>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#b4b4b4;">}</span><br/><span style="color:#b4b4b4;">}</span><br/><span style="color:#569cd6;">template</span>&nbsp;<span style="color:#b4b4b4;">&lt;</span><span style="color:#569cd6;">typename</span>&nbsp;<span style="color:gold;">T</span><span style="color:#b4b4b4;">,</span>&nbsp;<span style="color:#569cd6;">typename</span><span style="color:#b4b4b4;">...</span>&nbsp;Args<span style="color:#b4b4b4;">&gt;</span><br/><span style="color:#569cd6;">void</span>&nbsp;<span style="color:#ff8000;">printf</span><span style="color:#b4b4b4;">(</span><span style="color:#569cd6;">const</span>&nbsp;<span style="color:#569cd6;">char</span><span style="color:#b4b4b4;">*</span><span style="color:darkkhaki;">s</span><span style="color:#b4b4b4;">,</span>&nbsp;<span style="color:gold;">T</span>&nbsp;<span style="color:darkkhaki;">value</span><span style="color:#b4b4b4;">,</span>&nbsp;Args<span style="color:#b4b4b4;">...</span>&nbsp;<span style="color:darkkhaki;">args</span><span style="color:#b4b4b4;">)</span><br/><span style="color:#b4b4b4;">{</span><br/>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#569cd6;">while</span>&nbsp;<span style="color:#b4b4b4;">(*</span><span style="color:darkkhaki;">s</span><span style="color:#b4b4b4;">)</span><br/>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#b4b4b4;">{</span><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#569cd6;">if</span>&nbsp;<span style="color:#b4b4b4;">(*</span><span style="color:darkkhaki;">s</span>&nbsp;<span style="color:#b4b4b4;">==</span>&nbsp;<span style="color:#d69d85;">&#39;%&#39;</span>&nbsp;<span style="color:#b4b4b4;">&amp;&amp;</span>&nbsp;<span style="color:#b4b4b4;">*(++</span><span style="color:darkkhaki;">s</span><span style="color:#b4b4b4;">)</span>&nbsp;<span style="color:#b4b4b4;">!=</span>&nbsp;<span style="color:#d69d85;">&#39;%&#39;</span><span style="color:#b4b4b4;">)</span><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#b4b4b4;">{</span><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:gold;">std</span><span style="color:#b4b4b4;">::</span><span style="color:darkkhaki;">cout</span>&nbsp;<span style="color:#b4b4b4;">&lt;&lt;</span>&nbsp;<span style="color:darkkhaki;">value</span><span style="color:#b4b4b4;">;</span><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff8000;">printf</span><span style="color:#b4b4b4;">(*</span><span style="color:darkkhaki;">s</span>&nbsp;<span style="color:#b4b4b4;">?</span>&nbsp;<span style="color:#b4b4b4;">++</span><span style="color:darkkhaki;">s</span>&nbsp;<span style="color:#b4b4b4;">:</span>&nbsp;<span style="color:darkkhaki;">s</span><span style="color:#b4b4b4;">,</span>&nbsp;<span style="color:gold;">std</span><span style="color:#b4b4b4;">::</span><span style="color:#ff8000;">forward</span><span style="color:#b4b4b4;">&lt;</span>Args<span style="color:#b4b4b4;">&gt;(</span><span style="color:darkkhaki;">args</span><span style="color:#b4b4b4;">)...);</span><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#569cd6;">return</span><span style="color:#b4b4b4;">;</span><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#b4b4b4;">}</span><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:gold;">std</span><span style="color:#b4b4b4;">::</span><span style="color:darkkhaki;">cout</span>&nbsp;<span style="color:#b4b4b4;">&lt;&lt;</span>&nbsp;<span style="color:#b4b4b4;">*</span><span style="color:darkkhaki;">s</span><span style="color:#b4b4b4;">++;</span><br/>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#b4b4b4;">}</span><br/>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#569cd6;">throw</span>&nbsp;<span style="color:gold;">std</span><span style="color:#b4b4b4;">::</span><span style="color:gold;">logic_error</span><span style="color:#b4b4b4;">(</span><span style="color:#d69d85;">&quot;extra&nbsp;arguments&nbsp;provided&nbsp;to&nbsp;printf&quot;</span><span style="color:#b4b4b4;">);</span><br/><span style="color:#b4b4b4;">}</span><br/> <br/><span style="color:#ff8000;">printf</span><span style="color:#b4b4b4;">(</span><span style="color:#d69d85;">&quot;hello&nbsp;%d,&nbsp;this&nbsp;%s&nbsp;is&nbsp;%f&nbsp;a&nbsp;good&nbsp;%c&nbsp;thing&quot;</span><span style="color:#b4b4b4;">,</span>&nbsp;<span style="color:#b5cea8;">1</span><span style="color:#b4b4b4;">,</span>&nbsp;<span style="color:#d69d85;">&quot;xxxxxxx&quot;</span><span style="color:#b4b4b4;">,</span>&nbsp;<span style="color:#b5cea8;">1.2</span><span style="color:#b4b4b4;">,</span>&nbsp;<span style="color:#d69d85;">&#39;A&#39;</span><span style="color:#b4b4b4;">);</span><br/> <br/><span style="color:#57a64a;">//3.//////////////////////////////////////////////////////</span><br/><span style="color:#57a64a;">//&nbsp;使用变参递归实现&nbsp;map&lt;k1,&nbsp;map&lt;k2,&nbsp;map&lt;k3,&nbsp;...&gt;&gt;&gt;数据结构</span><br/><span style="color:#569cd6;">template</span>&nbsp;<span style="color:#b4b4b4;">&lt;</span><span style="color:gold;">size_t</span>&nbsp;<span style="color:darkkhaki;">_Index</span><span style="color:#b4b4b4;">,</span>&nbsp;<span style="color:#569cd6;">typename</span>&nbsp;<span style="color:gold;">_Key</span><span style="color:#b4b4b4;">,</span>&nbsp;<span style="color:#569cd6;">typename</span><span style="color:#b4b4b4;">...</span>&nbsp;_Keys_Value<span style="color:#b4b4b4;">&gt;</span><br/><span style="color:#569cd6;">class</span>&nbsp;<span style="color:gold;">level_map_helper</span>&nbsp;<span style="color:#b4b4b4;">:</span>&nbsp;<span style="color:#569cd6;">public</span>&nbsp;<span style="color:gold;">level_map_helper</span><span style="color:#b4b4b4;">&lt;</span><span style="color:darkkhaki;">_Index</span>&nbsp;<span style="color:#b4b4b4;">-</span>&nbsp;<span style="color:#b5cea8;">1</span><span style="color:#b4b4b4;">,</span>&nbsp;_Keys_Value<span style="color:#b4b4b4;">...&gt;</span><br/><span style="color:#b4b4b4;">{</span><br/><span style="color:#569cd6;">public</span><span style="color:#b4b4b4;">:</span><br/>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#569cd6;">typedef</span>&nbsp;<span style="color:gold;">level_map_helper</span><span style="color:#b4b4b4;">&lt;</span><span style="color:darkkhaki;">_Index</span>&nbsp;<span style="color:#b4b4b4;">-</span>&nbsp;<span style="color:#b5cea8;">1</span><span style="color:#b4b4b4;">,</span>&nbsp;_Keys_Value<span style="color:#b4b4b4;">...&gt;</span>&nbsp;<span style="color:gold;">_BaseTy</span><span style="color:#b4b4b4;">;</span><br/>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#569cd6;">typedef</span>&nbsp;<span style="color:#569cd6;">typename</span>&nbsp;<span style="color:gold;">std</span><span style="color:#b4b4b4;">::</span><span style="color:gold;">map</span><span style="color:#b4b4b4;">&lt;</span><span style="color:gold;">std</span><span style="color:#b4b4b4;">::</span><span style="color:gold;">remove_const_t</span><span style="color:#b4b4b4;">&lt;</span><span style="color:gold;">std</span><span style="color:#b4b4b4;">::</span><span style="color:gold;">remove_reference_t</span><span style="color:#b4b4b4;">&lt;</span><span style="color:gold;">_Key</span><span style="color:#b4b4b4;">&gt;&gt;,</span>&nbsp;<span style="color:#569cd6;">typename</span>&nbsp;<span style="color:gold;">_BaseTy</span><span style="color:#b4b4b4;">::</span><span style="color:gold;">type</span><span style="color:#b4b4b4;">&gt;</span>&nbsp;<span style="color:gold;">type</span><span style="color:#b4b4b4;">;</span><br/><span style="color:#b4b4b4;">};</span><br/> <br/><span style="color:#569cd6;">template</span>&nbsp;<span style="color:#b4b4b4;">&lt;</span><span style="color:#569cd6;">typename</span>&nbsp;<span style="color:gold;">_Key</span><span style="color:#b4b4b4;">,</span>&nbsp;<span style="color:#569cd6;">typename</span>&nbsp;<span style="color:gold;">_Value</span><span style="color:#b4b4b4;">&gt;</span><br/><span style="color:#569cd6;">class</span>&nbsp;<span style="color:gold;">level_map_helper</span><span style="color:#b4b4b4;">&lt;</span><span style="color:#b5cea8;">2</span><span style="color:#b4b4b4;">,</span>&nbsp;<span style="color:gold;">_Key</span><span style="color:#b4b4b4;">,</span>&nbsp;<span style="color:gold;">_Value</span><span style="color:#b4b4b4;">&gt;</span><br/><span style="color:#b4b4b4;">{</span><br/><span style="color:#569cd6;">public</span><span style="color:#b4b4b4;">:</span><br/>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#569cd6;">typedef</span>&nbsp;<span style="color:#569cd6;">typename</span>&nbsp;<span style="color:gold;">std</span><span style="color:#b4b4b4;">::</span><span style="color:gold;">map</span><span style="color:#b4b4b4;">&lt;</span><span style="color:gold;">std</span><span style="color:#b4b4b4;">::</span><span style="color:gold;">remove_const_t</span><span style="color:#b4b4b4;">&lt;</span><span style="color:gold;">std</span><span style="color:#b4b4b4;">::</span><span style="color:gold;">remove_reference_t</span><span style="color:#b4b4b4;">&lt;</span><span style="color:gold;">_Key</span><span style="color:#b4b4b4;">&gt;&gt;</span><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#b4b4b4;">,</span>&nbsp;<span style="color:gold;">std</span><span style="color:#b4b4b4;">::</span><span style="color:gold;">remove_const_t</span><span style="color:#b4b4b4;">&lt;</span><span style="color:gold;">std</span><span style="color:#b4b4b4;">::</span><span style="color:gold;">remove_reference_t</span><span style="color:#b4b4b4;">&lt;</span><span style="color:gold;">_Value</span><span style="color:#b4b4b4;">&gt;&gt;&gt;</span>&nbsp;<span style="color:gold;">type</span><span style="color:#b4b4b4;">;</span><br/><span style="color:#b4b4b4;">};</span><br/> <br/><span style="color:#569cd6;">template</span>&nbsp;<span style="color:#b4b4b4;">&lt;</span><span style="color:#569cd6;">typename</span><span style="color:#b4b4b4;">...</span>&nbsp;_Keys_Value<span style="color:#b4b4b4;">&gt;</span><br/><span style="color:#569cd6;">class</span>&nbsp;<span style="color:gold;">level_map_helper</span><span style="color:#b4b4b4;">&lt;</span><span style="color:#b5cea8;">1</span><span style="color:#b4b4b4;">,</span>&nbsp;_Keys_Value<span style="color:#b4b4b4;">...&gt;</span><br/><span style="color:#b4b4b4;">{};</span><br/> <br/><span style="color:#569cd6;">template</span>&nbsp;<span style="color:#b4b4b4;">&lt;</span><span style="color:#569cd6;">typename</span><span style="color:#b4b4b4;">...</span>&nbsp;_Keys_Value<span style="color:#b4b4b4;">&gt;</span><br/><span style="color:#569cd6;">class</span>&nbsp;<span style="color:gold;">level_map_helper</span><span style="color:#b4b4b4;">&lt;</span><span style="color:#b5cea8;">0</span><span style="color:#b4b4b4;">,</span>&nbsp;_Keys_Value<span style="color:#b4b4b4;">...&gt;</span><br/><span style="color:#b4b4b4;">{};</span><br/> <br/><span style="color:#569cd6;">template</span><span style="color:#b4b4b4;">&lt;</span><span style="color:#569cd6;">typename</span>&nbsp;<span style="color:gold;">_Key</span><span style="color:#b4b4b4;">,</span>&nbsp;<span style="color:#569cd6;">typename</span>&nbsp;<span style="color:gold;">_Key_Value</span><span style="color:#b4b4b4;">,</span>&nbsp;<span style="color:#569cd6;">typename</span><span style="color:#b4b4b4;">...</span>&nbsp;_Keys_Value<span style="color:#b4b4b4;">&gt;</span><br/><span style="color:#569cd6;">using</span>&nbsp;<span style="color:gold;">level_map</span>&nbsp;<span style="color:#b4b4b4;">=</span>&nbsp;<span style="color:#569cd6;">typename</span>&nbsp;<span style="color:gold;">level_map_helper</span><span style="color:#b4b4b4;">&lt;</span><span style="color:#b5cea8;">2</span>&nbsp;<span style="color:#b4b4b4;">+</span>&nbsp;<span style="color:#569cd6;">sizeof</span><span style="color:#b4b4b4;">...(</span>_Keys_Value<span style="color:#b4b4b4;">),</span>&nbsp;<span style="color:gold;">_Key</span><span style="color:#b4b4b4;">,</span>&nbsp;<span style="color:gold;">_Key_Value</span><span style="color:#b4b4b4;">,</span>&nbsp;_Keys_Value<span style="color:#b4b4b4;">...&gt;::</span><span style="color:gold;">type</span><span style="color:#b4b4b4;">;</span><br/> <br/><span style="color:#57a64a;">//4.//////////////////////////////////////////////////////</span><br/><span style="color:#57a64a;">//&nbsp;完美转发</span><br/><span style="color:#569cd6;">template</span>&nbsp;<span style="color:#b4b4b4;">&lt;</span><span style="color:#569cd6;">typename</span>&nbsp;<span style="color:gold;">T</span><span style="color:#b4b4b4;">,</span>&nbsp;<span style="color:#569cd6;">typename</span><span style="color:#b4b4b4;">...</span>&nbsp;Args<span style="color:#b4b4b4;">&gt;</span><br/><span style="color:#569cd6;">void</span>&nbsp;<span style="color:#ff8000;">printf</span><span style="color:#b4b4b4;">(</span><span style="color:#569cd6;">const</span>&nbsp;<span style="color:#569cd6;">char</span><span style="color:#b4b4b4;">*</span><span style="color:darkkhaki;">s</span><span style="color:#b4b4b4;">,</span>&nbsp;<span style="color:gold;">T</span>&nbsp;<span style="color:darkkhaki;">value</span><span style="color:#b4b4b4;">,</span>&nbsp;Args<span style="color:#b4b4b4;">&amp;&amp;...</span>&nbsp;<span style="color:darkkhaki;">args</span><span style="color:#b4b4b4;">)</span><br/><span style="color:#b4b4b4;">{</span><br/>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#569cd6;">while</span>&nbsp;<span style="color:#b4b4b4;">(*</span><span style="color:darkkhaki;">s</span><span style="color:#b4b4b4;">)</span><br/>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#b4b4b4;">{</span><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#569cd6;">if</span>&nbsp;<span style="color:#b4b4b4;">(*</span><span style="color:darkkhaki;">s</span>&nbsp;<span style="color:#b4b4b4;">==</span>&nbsp;<span style="color:#d69d85;">&#39;%&#39;</span>&nbsp;<span style="color:#b4b4b4;">&amp;&amp;</span>&nbsp;<span style="color:#b4b4b4;">*(++</span><span style="color:darkkhaki;">s</span><span style="color:#b4b4b4;">)</span>&nbsp;<span style="color:#b4b4b4;">!=</span>&nbsp;<span style="color:#d69d85;">&#39;%&#39;</span><span style="color:#b4b4b4;">)</span><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#b4b4b4;">{</span><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:gold;">std</span><span style="color:#b4b4b4;">::</span><span style="color:darkkhaki;">cout</span>&nbsp;<span style="color:#b4b4b4;">&lt;&lt;</span>&nbsp;<span style="color:darkkhaki;">value</span><span style="color:#b4b4b4;">;</span><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#ff8000;">printf</span><span style="color:#b4b4b4;">(*</span><span style="color:darkkhaki;">s</span>&nbsp;<span style="color:#b4b4b4;">?</span>&nbsp;<span style="color:#b4b4b4;">++</span><span style="color:darkkhaki;">s</span>&nbsp;<span style="color:#b4b4b4;">:</span>&nbsp;<span style="color:darkkhaki;">s</span><span style="color:#b4b4b4;">,</span>&nbsp;<span style="color:darkkhaki;">args</span><span style="color:#b4b4b4;">...);</span><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#569cd6;">return</span><span style="color:#b4b4b4;">;</span><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#b4b4b4;">}</span><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:gold;">std</span><span style="color:#b4b4b4;">::</span><span style="color:darkkhaki;">cout</span>&nbsp;<span style="color:#b4b4b4;">&lt;&lt;</span>&nbsp;<span style="color:#b4b4b4;">*</span><span style="color:darkkhaki;">s</span><span style="color:#b4b4b4;">++;</span><br/>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#b4b4b4;">}</span><br/>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#569cd6;">throw</span>&nbsp;<span style="color:gold;">std</span><span style="color:#b4b4b4;">::</span><span style="color:gold;">logic_error</span><span style="color:#b4b4b4;">(</span><span style="color:#d69d85;">&quot;extra&nbsp;arguments&nbsp;provided&nbsp;to&nbsp;printf&quot;</span><span style="color:#b4b4b4;">);</span><br/><span style="color:#b4b4b4;">}</span><br/> <br/><span style="color:#57a64a;">//5.//////////////////////////////////////////////////////</span><br/><span style="color:#57a64a;">//&nbsp;sizeof...()</span><br/><span style="color:#569cd6;">template</span>&nbsp;<span style="color:#b4b4b4;">&lt;</span><span style="color:#569cd6;">typename</span><span style="color:#b4b4b4;">...</span>&nbsp;Args<span style="color:#b4b4b4;">&gt;</span><br/><span style="color:gold;">size_t</span>&nbsp;<span style="color:darkkhaki;">size</span><span style="color:#b4b4b4;">(</span>Args<span style="color:#b4b4b4;">&amp;&amp;...)</span><br/><span style="color:#b4b4b4;">{</span><br/>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#569cd6;">return</span>&nbsp;<span style="color:#569cd6;">sizeof</span><span style="color:#b4b4b4;">...(</span>Args<span style="color:#b4b4b4;">);</span><br/><span style="color:#b4b4b4;">}</span><br/> <br/><span style="color:#57a64a;">//6.//////////////////////////////////////////////////////</span><br/><span style="color:#57a64a;">//&nbsp;参数包解包</span><br/><span style="color:#569cd6;">int</span>&nbsp;<span style="color:darkkhaki;">sum</span><span style="color:#b4b4b4;">(</span><span style="color:#569cd6;">int</span>&nbsp;<span style="color:darkkhaki;">i</span><span style="color:#b4b4b4;">)</span>&nbsp;<span style="color:#b4b4b4;">{</span>&nbsp;<span style="color:#569cd6;">return</span>&nbsp;<span style="color:darkkhaki;">i</span><span style="color:#b4b4b4;">;</span>&nbsp;<span style="color:#b4b4b4;">}</span><br/><span style="color:#569cd6;">int</span>&nbsp;<span style="color:darkkhaki;">sum</span><span style="color:#b4b4b4;">(</span><span style="color:#569cd6;">int</span>&nbsp;<span style="color:darkkhaki;">i</span><span style="color:#b4b4b4;">,</span>&nbsp;<span style="color:#569cd6;">int</span>&nbsp;<span style="color:darkkhaki;">j</span><span style="color:#b4b4b4;">)</span>&nbsp;<span style="color:#b4b4b4;">{</span>&nbsp;<span style="color:#569cd6;">return</span>&nbsp;<span style="color:darkkhaki;">i</span>&nbsp;<span style="color:#b4b4b4;">+</span>&nbsp;<span style="color:darkkhaki;">j</span><span style="color:#b4b4b4;">;</span>&nbsp;<span style="color:#b4b4b4;">}</span><br/><span style="color:#569cd6;">int</span>&nbsp;<span style="color:darkkhaki;">sum</span><span style="color:#b4b4b4;">(</span><span style="color:#569cd6;">int</span>&nbsp;<span style="color:darkkhaki;">i</span><span style="color:#b4b4b4;">,</span>&nbsp;<span style="color:#569cd6;">int</span>&nbsp;<span style="color:darkkhaki;">j</span><span style="color:#b4b4b4;">,</span>&nbsp;<span style="color:#569cd6;">int</span>&nbsp;<span style="color:darkkhaki;">k</span><span style="color:#b4b4b4;">)</span>&nbsp;<span style="color:#b4b4b4;">{</span>&nbsp;<span style="color:#569cd6;">return</span>&nbsp;<span style="color:darkkhaki;">i</span>&nbsp;<span style="color:#b4b4b4;">+</span>&nbsp;<span style="color:darkkhaki;">j</span>&nbsp;<span style="color:#b4b4b4;">+</span>&nbsp;<span style="color:darkkhaki;">k</span><span style="color:#b4b4b4;">;</span>&nbsp;<span style="color:#b4b4b4;">}</span><br/> <br/><span style="color:#569cd6;">template</span>&nbsp;<span style="color:#b4b4b4;">&lt;</span><span style="color:#569cd6;">typename</span><span style="color:#b4b4b4;">...</span>&nbsp;Args<span style="color:#b4b4b4;">&gt;</span><br/><span style="color:#569cd6;">decltype</span><span style="color:#b4b4b4;">(</span><span style="color:#569cd6;">auto</span><span style="color:#b4b4b4;">)</span>&nbsp;<span style="color:darkkhaki;">sum2</span><span style="color:#b4b4b4;">(</span>Args<span style="color:#b4b4b4;">&amp;&amp;...</span>&nbsp;<span style="color:darkkhaki;">args</span><span style="color:#b4b4b4;">)</span><br/><span style="color:#b4b4b4;">{</span><br/>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#569cd6;">return</span>&nbsp;<span style="color:darkkhaki;">sum</span><span style="color:#b4b4b4;">((</span><span style="color:gold;">std</span><span style="color:#b4b4b4;">::</span><span style="color:#ff8000;">forward</span><span style="color:#b4b4b4;">&lt;</span>Args<span style="color:#b4b4b4;">&gt;(</span><span style="color:darkkhaki;">args</span><span style="color:#b4b4b4;">)</span>&nbsp;<span style="color:#b4b4b4;">*</span>&nbsp;<span style="color:#b5cea8;">2</span><span style="color:#b4b4b4;">)...);</span><br/><span style="color:#b4b4b4;">}</span><br/> <br/><span style="color:#57a64a;">//6.//////////////////////////////////////////////////////</span><br/><span style="color:#57a64a;">//&nbsp;几种变长参数比较</span><br/><span style="color:#57a64a;">////&nbsp;c语言风格-弊端</span><br/><span style="color:#9b9b9b;">#include</span>&nbsp;<span style="color:#d69d85;">&lt;stdarg.h&gt;</span><br/><span style="color:gold;">std</span><span style="color:#b4b4b4;">::</span><span style="color:gold;">string</span>&nbsp;<span style="color:#ff8000;">mult_str_cat</span><span style="color:#b4b4b4;">(</span><span style="color:gold;">size_t</span>&nbsp;<span style="color:darkkhaki;">n</span><span style="color:#b4b4b4;">,</span>&nbsp;<span style="color:#b4b4b4;">...)</span><br/><span style="color:#b4b4b4;">{</span><br/>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:gold;">std</span><span style="color:#b4b4b4;">::</span><span style="color:gold;">string</span>&nbsp;<span style="color:darkkhaki;">ret</span><span style="color:#b4b4b4;">{};</span><br/>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:gold;">va_list</span>&nbsp;<span style="color:darkkhaki;">ap</span><span style="color:#b4b4b4;">;</span><br/>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#bd63c5;">va_start</span><span style="color:#b4b4b4;">(</span><span style="color:darkkhaki;">ap</span><span style="color:#b4b4b4;">,</span>&nbsp;<span style="color:darkkhaki;">n</span><span style="color:#b4b4b4;">);</span><br/>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#569cd6;">for</span>&nbsp;<span style="color:#b4b4b4;">(</span><span style="color:gold;">size_t</span>&nbsp;<span style="color:darkkhaki;">i</span>&nbsp;<span style="color:#b4b4b4;">=</span>&nbsp;<span style="color:#b5cea8;">0</span><span style="color:#b4b4b4;">;</span>&nbsp;<span style="color:darkkhaki;">i</span>&nbsp;<span style="color:#b4b4b4;">&lt;</span>&nbsp;<span style="color:darkkhaki;">n</span><span style="color:#b4b4b4;">;</span>&nbsp;<span style="color:#b4b4b4;">++</span><span style="color:darkkhaki;">i</span><span style="color:#b4b4b4;">)</span><br/>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#b4b4b4;">{</span><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:darkkhaki;">ret</span>&nbsp;<span style="color:#b4b4b4;">+=</span>&nbsp;<span style="color:#bd63c5;">va_arg</span><span style="color:#b4b4b4;">(</span><span style="color:darkkhaki;">ap</span><span style="color:#b4b4b4;">,</span>&nbsp;<span style="color:gold;">std</span><span style="color:#b4b4b4;">::</span><span style="color:gold;">string</span><span style="color:#b4b4b4;">);</span><br/>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#b4b4b4;">}</span><br/>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#bd63c5;">va_end</span><span style="color:#b4b4b4;">(</span><span style="color:darkkhaki;">ap</span><span style="color:#b4b4b4;">);</span><br/>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#569cd6;">return</span>&nbsp;<span style="color:darkkhaki;">ret</span><span style="color:#b4b4b4;">;</span><br/><span style="color:#b4b4b4;">}</span><br/><span style="color:#569cd6;">auto</span>&nbsp;<span style="color:darkkhaki;">s1</span>&nbsp;<span style="color:#b4b4b4;">=</span>&nbsp;<span style="color:#ff8000;">mult_str_cat</span><span style="color:#b4b4b4;">(</span><span style="color:#b5cea8;">2</span><span style="color:#b4b4b4;">,</span>&nbsp;<span style="color:#d69d85;">&quot;hello&nbsp;&quot;</span><span style="color:#b4b4b4;">,</span>&nbsp;<span style="color:#d69d85;">&quot;world.&quot;</span><span style="color:#b4b4b4;">);</span>&nbsp;<span style="color:#57a64a;">//&nbsp;编译成功，运行崩溃</span><br/><span style="color:#569cd6;">auto</span>&nbsp;<span style="color:darkkhaki;">s2</span>&nbsp;<span style="color:#b4b4b4;">=</span>&nbsp;<span style="color:#ff8000;">mult_str_cat</span><span style="color:#b4b4b4;">(</span><span style="color:#b5cea8;">2</span><span style="color:#b4b4b4;">,</span>&nbsp;<span style="color:#b5cea8;">100</span><span style="color:#b4b4b4;">,</span>&nbsp;<span style="color:#b5cea8;">200</span><span style="color:#b4b4b4;">);</span>&nbsp;<span style="color:#57a64a;">//&nbsp;编译成功，运行崩溃</span><br/><span style="color:#569cd6;">auto</span>&nbsp;<span style="color:darkkhaki;">s3</span>&nbsp;<span style="color:#b4b4b4;">=</span>&nbsp;<span style="color:#ff8000;">mult_str_cat</span><span style="color:#b4b4b4;">(</span><span style="color:#b5cea8;">2</span><span style="color:#b4b4b4;">,</span>&nbsp;<span style="color:gold;">std</span><span style="color:#b4b4b4;">::</span><span style="color:gold;">string</span><span style="color:#b4b4b4;">{</span>&nbsp;<span style="color:#d69d85;">&quot;hello&nbsp;&quot;</span>&nbsp;<span style="color:#b4b4b4;">},</span>&nbsp;<span style="color:gold;">std</span><span style="color:#b4b4b4;">::</span><span style="color:gold;">string</span><span style="color:#b4b4b4;">{</span>&nbsp;<span style="color:#d69d85;">&quot;world.&quot;</span>&nbsp;<span style="color:#b4b4b4;">});</span><span style="color:#57a64a;">//正确</span><br/> <br/><span style="color:#57a64a;">////&nbsp;变长模板参数-优势</span><br/><span style="color:#569cd6;">struct</span>&nbsp;<span style="color:gold;">D</span>&nbsp;<span style="color:#b4b4b4;">{</span>&nbsp;<span style="color:gold;">D</span><span style="color:#b4b4b4;">(</span><span style="color:#569cd6;">int</span>&nbsp;<span style="color:darkkhaki;">i</span><span style="color:#b4b4b4;">,</span>&nbsp;<span style="color:#569cd6;">const</span>&nbsp;<span style="color:gold;">std</span><span style="color:#b4b4b4;">::</span><span style="color:gold;">string</span><span style="color:#b4b4b4;">&amp;</span>&nbsp;<span style="color:darkkhaki;">s</span><span style="color:#b4b4b4;">)</span>&nbsp;<span style="color:#b4b4b4;">{}};</span><br/><span style="color:gold;">std</span><span style="color:#b4b4b4;">::</span><span style="color:gold;">map</span><span style="color:#b4b4b4;">&lt;</span><span style="color:#569cd6;">int</span><span style="color:#b4b4b4;">,</span>&nbsp;<span style="color:gold;">D</span><span style="color:#b4b4b4;">&gt;</span>&nbsp;<span style="color:darkkhaki;">md</span><span style="color:#b4b4b4;">;</span><br/><span style="color:darkkhaki;">md</span><span style="color:#b4b4b4;">.</span><span style="color:#ff8000;">try_emplace</span><span style="color:#b4b4b4;">(</span><span style="color:#b5cea8;">1</span><span style="color:#b4b4b4;">,</span>&nbsp;<span style="color:#b5cea8;">1</span><span style="color:#b4b4b4;">,</span>&nbsp;<span style="color:#d69d85;">&quot;hello&quot;</span><span style="color:#b4b4b4;">);</span>&nbsp;<span style="color:#57a64a;">//&nbsp;编译成功，运行成功</span><br/><span style="color:darkkhaki;">md</span><span style="color:#b4b4b4;">.</span><span style="color:#ff8000;">try_emplace</span><span style="color:#b4b4b4;">(</span><span style="color:#b5cea8;">1</span><span style="color:#b4b4b4;">,</span>&nbsp;<span style="color:#b5cea8;">1</span><span style="color:#b4b4b4;">);</span>&nbsp;<span style="color:#57a64a;">//&nbsp;编译失败</span><br/><span style="color:darkkhaki;">md</span><span style="color:#b4b4b4;">.</span><span style="color:#ff8000;">try_emplace</span><span style="color:#b4b4b4;">(</span><span style="color:#b5cea8;">1</span><span style="color:#b4b4b4;">,</span>&nbsp;<span style="color:#b5cea8;">1</span><span style="color:#b4b4b4;">,</span>&nbsp;<span style="color:#b5cea8;">2</span><span style="color:#b4b4b4;">);</span>&nbsp;<span style="color:#57a64a;">//&nbsp;编译失败</span><br/> <br/><span style="color:#57a64a;">////&nbsp;变长参数宏</span><br/><span style="color:#57a64a;">//////&nbsp;1.&nbsp;简单使用</span><br/><span style="color:#9b9b9b;">#define</span>&nbsp;<span style="color:#bd63c5;">SOME_MACRO</span><span style="color:#b4b4b4;">(</span><span style="color:gold;">type</span><span style="color:#b4b4b4;">,</span>&nbsp;<span style="color:darkkhaki;">name</span><span style="color:#b4b4b4;">,</span>&nbsp;<span style="color:darkkhaki;">comment</span><span style="color:#b4b4b4;">,</span>&nbsp;<span style="color:#b4b4b4;">...)</span>&nbsp;<span style="color:gold;">type</span>&nbsp;<span style="color:darkkhaki;">name</span>&nbsp;<span style="color:#b4b4b4;">{##</span>__VA_ARGS__<span style="color:#b4b4b4;">};</span><br/><span style="color:#bd63c5;">SOME_MACRO</span><span style="color:#b4b4b4;">(</span><span style="color:gold;">D</span><span style="color:#b4b4b4;">,</span>&nbsp;<span style="color:darkkhaki;">ddd</span><span style="color:#b4b4b4;">,</span>&nbsp;<span style="color:#d69d85;">&quot;hhh&quot;</span><span style="color:#b4b4b4;">,</span>&nbsp;<span style="color:#b5cea8;">1</span><span style="color:#b4b4b4;">,</span>&nbsp;<span style="color:#d69d85;">&quot;hello&quot;</span><span style="color:#b4b4b4;">);</span><br/><span style="color:#bd63c5;">SOME_MACRO</span><span style="color:#b4b4b4;">(</span><span style="color:#569cd6;">int</span><span style="color:#b4b4b4;">,</span>&nbsp;<span style="color:darkkhaki;">eee</span><span style="color:#b4b4b4;">,</span>&nbsp;<span style="color:#d69d85;">&quot;hhh&quot;</span><span style="color:#b4b4b4;">,</span>&nbsp;<span style="color:#b5cea8;">100</span><span style="color:#b4b4b4;">);</span><br/> <br/><span style="color:#57a64a;">//////&nbsp;2.&nbsp;实现简单反射</span><br/><span style="color:#57a64a;">//&nbsp;注册类</span><br/><span style="color:#569cd6;">class</span>&nbsp;<span style="color:gold;">CmsRegistry</span><br/><span style="color:#b4b4b4;">{</span><br/><span style="color:#569cd6;">public</span><span style="color:#b4b4b4;">:</span><br/>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#569cd6;">void</span>&nbsp;<span style="color:#ff8000;">Reg</span><span style="color:#b4b4b4;">(</span><span style="color:#569cd6;">const</span>&nbsp;<span style="color:gold;">CmdFunc</span><span style="color:#b4b4b4;">&amp;</span>&nbsp;<span style="color:darkkhaki;">func</span><span style="color:#b4b4b4;">,</span>&nbsp;<span style="color:#569cd6;">const</span>&nbsp;<span style="color:#569cd6;">char</span><span style="color:#b4b4b4;">*</span>&nbsp;<span style="color:darkkhaki;">name</span><span style="color:#b4b4b4;">,</span>&nbsp;<span style="color:#569cd6;">const</span>&nbsp;<span style="color:#569cd6;">char</span><span style="color:#b4b4b4;">*</span>&nbsp;<span style="color:darkkhaki;">args</span><span style="color:#b4b4b4;">,</span>&nbsp;<span style="color:#569cd6;">const</span>&nbsp;<span style="color:#569cd6;">char</span><span style="color:#b4b4b4;">*</span>&nbsp;<span style="color:darkkhaki;">comment</span><span style="color:#b4b4b4;">)</span><br/>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#b4b4b4;">{</span><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:darkkhaki;">m_cmd_signs</span><span style="color:#b4b4b4;">[</span><span style="color:darkkhaki;">name</span><span style="color:#b4b4b4;">]</span>&nbsp;<span style="color:#b4b4b4;">=</span>&nbsp;<span style="color:#b4b4b4;">{</span>&nbsp;<span style="color:darkkhaki;">func</span><span style="color:#b4b4b4;">,</span>&nbsp;<span style="color:gold;">std</span><span style="color:#b4b4b4;">::</span><span style="color:gold;">string</span><span style="color:#b4b4b4;">{</span>&nbsp;<span style="color:#d69d85;">&quot;void&nbsp;&quot;</span>&nbsp;<span style="color:#b4b4b4;">}</span>&nbsp;<span style="color:#b4b4b4;">+</span><span style="color:darkkhaki;">name</span>&nbsp;<span style="color:#b4b4b4;">+</span>&nbsp;<span style="color:#d69d85;">&quot;(&quot;</span>&nbsp;<span style="color:#b4b4b4;">+</span>&nbsp;<span style="color:darkkhaki;">args</span>&nbsp;<span style="color:#b4b4b4;">+</span>&nbsp;<span style="color:#d69d85;">&quot;)&quot;</span><span style="color:#b4b4b4;">,</span>&nbsp;<span style="color:darkkhaki;">comment</span>&nbsp;<span style="color:#b4b4b4;">};</span><br/>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#b4b4b4;">}</span><br/><span style="color:#569cd6;">private</span><span style="color:#b4b4b4;">:</span><br/>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:gold;">std</span><span style="color:#b4b4b4;">::</span><span style="color:gold;">map</span><span style="color:#b4b4b4;">&lt;</span><span style="color:gold;">std</span><span style="color:#b4b4b4;">::</span><span style="color:gold;">string</span><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#b4b4b4;">,</span>&nbsp;<span style="color:gold;">std</span><span style="color:#b4b4b4;">::</span><span style="color:#ff8000;">tuple</span><span style="color:#b4b4b4;">&lt;</span><span style="color:gold;">CmdFunc</span><span style="color:#b4b4b4;">,</span>&nbsp;<span style="color:gold;">std</span><span style="color:#b4b4b4;">::</span><span style="color:gold;">string</span><span style="color:#b4b4b4;">,</span>&nbsp;<span style="color:gold;">std</span><span style="color:#b4b4b4;">::</span><span style="color:gold;">string</span><span style="color:#b4b4b4;">&gt;&gt;</span>&nbsp;<span style="color:darkkhaki;">m_cmd_signs</span><span style="color:#b4b4b4;">;</span>&nbsp;<span style="color:#57a64a;">//注册签名信息</span><br/><span style="color:#b4b4b4;">};</span><br/><span style="color:#57a64a;">//&nbsp;注册宏</span><br/><span style="color:#9b9b9b;">#define</span>&nbsp;<span style="color:#bd63c5;">DefCmdFunc</span><span style="color:#b4b4b4;">(</span>desc<span style="color:#b4b4b4;">,</span>&nbsp;<span style="color:darkkhaki;">name</span><span style="color:#b4b4b4;">,</span>&nbsp;<span style="color:#b4b4b4;">...)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\<br/>&nbsp;&nbsp;&nbsp;&nbsp;cmd_registry<span style="color:#b4b4b4;">.</span><span style="color:#ff8000;">Reg</span><span style="color:#b4b4b4;">(</span><span style="color:darkkhaki;">name</span><span style="color:#b4b4b4;">,</span>&nbsp;<span style="color:#b4b4b4;">#</span>name<span style="color:#b4b4b4;">,</span>&nbsp;<span style="color:#b4b4b4;">#</span>__VA_ARGS__<span style="color:#b4b4b4;">,</span>&nbsp;desc<span style="color:#b4b4b4;">);</span>&nbsp;&nbsp;&nbsp;&nbsp;\<br/>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#569cd6;">void</span>&nbsp;<span style="color:darkkhaki;">name</span><span style="color:#b4b4b4;">(##</span>__VA_ARGS__<span style="color:#b4b4b4;">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\<br/><span style="color:#57a64a;">/*EndMacro*/</span><br/><span style="color:#57a64a;">//&nbsp;使用</span><br/><span style="color:#bd63c5;">DefCmdFunc</span><span style="color:#b4b4b4;">(</span><span style="color:#d69d85;">&quot;回显&quot;</span><span style="color:#b4b4b4;">,</span>&nbsp;<span style="color:darkkhaki;">Echo</span><span style="color:#b4b4b4;">,</span>&nbsp;<span style="color:#569cd6;">const</span>&nbsp;<span style="color:gold;">std</span><span style="color:#b4b4b4;">::</span><span style="color:gold;">string</span><span style="color:#b4b4b4;">&amp;</span>&nbsp;<span style="color:darkkhaki;">msg</span><span style="color:#b4b4b4;">)</span><br/><span style="color:#b4b4b4;">{</span><br/>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:gold;">std</span><span style="color:#b4b4b4;">::</span><span style="color:darkkhaki;">cout</span>&nbsp;<span style="color:#b4b4b4;">&lt;&lt;</span>&nbsp;msg&nbsp;<span style="color:#b4b4b4;">&lt;&lt;</span>&nbsp;<span style="color:gold;">std</span><span style="color:#b4b4b4;">::</span><span style="color:#ff8000;">endl</span><span style="color:#b4b4b4;">;</span><br/><span style="color:#b4b4b4;">}</span><br/></pre>
    </div>
  </body>
</html>
